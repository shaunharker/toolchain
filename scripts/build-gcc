GCCVERSION=$1
echo Building gcc-$GCCVERSION.
PROCS=16
CWD=$(pwd)
LOG=$CWD/logs
cd $TOOLCHAIN/software
## better -- download prerequisites directly
#cd ../software/gcc-$GCCVERSION
#if [ ! -d mpfr ]; then
#  echo Copying mprf to gcc source folder
#  cp -rf ../mpfr-3.1.2 mpfr
#fi
#if [ ! -d gmp ]; then
#  echo Copying gmp to gcc source folder
#  cp -rf ../gmp-5.1.3 gmp
#fi
#if [ ! -d mpc ]; then
#  echo Copying mpc to gcc source folder
#  cp -rf ../mpc-1.0.2 mpc
#fi
#cd ..
rm -rf gcc-${GCCVERSION}-build
mkdir gcc-${GCCVERSION}-build
cd gcc-${GCCVERSION}-build
../gcc-$GCCVERSION/configure --prefix=$TOOLCHAIN/usr     \
                             --build=x86_64-redhat-linux \
                             --disable-multilib          \
     > $LOG/gcc-${GCCVERSION}.config.log
make -j $PROCS > $LOG/gcc-${GCCVERSION}.build.log
make install -j $PROCS > $LOG/gcc-${GCCVERSION}.install.log
cd $CWD
